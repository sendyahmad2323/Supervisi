{% load static %}
<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <title>
      {% block title %}
        Supervisi Ners
      {% endblock %}
    </title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />

    <style>
      :root {
        --blue-1: #1e5ad6; /* brand */
        --blue-2: #0d6efd; /* bootstrap primary */
        --blue-3: #0b5ed7;
        --bg: #f3f6fc;
        --card: #ffffff;
        --text: #1f2937;
        --muted: #6b7280;
        --radius: 18px;
      }
      html,
      body {
        height: 100%;
      }
      body {
        min-height: 100vh;
        display: flex;
        margin: 0;
        background: var(--bg);
        font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        color: var(--text);
      }
      
      /* Sidebar */
      .sidebar {
        position: fixed; /* <- bukan sticky */
        left: 0;
        top: 0;
        bottom: 0;
        width: 260px;
        min-width: 260px;
        height: 100vh; /* penuh layar */
        overflow-y: auto; /* kalau menu panjang, scroll di dalam sidebar */
        background: linear-gradient(180deg, #2f69e1 0%, #2152c4 100%);
        color: #fff;
        padding: 20px 16px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        z-index: 1000; /* di atas konten */
      }
      
      .brand {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 10px 10px 16px;
      }
      .brand-badge {
        width: 42px;
        height: 42px;
        border-radius: 12px;
        background: rgba(255, 255, 255, 0.15);
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.18);
      }
      .brand h4 {
        margin: 0;
        font-weight: 800;
        letter-spacing: 0.3px;
      }
      .nav-section {
        margin-top: 0.5rem;
      }
      .side-link {
        color: #eaf1ff;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.7rem 0.9rem;
        margin: 6px 4px;
        border-radius: 12px;
        transition: all 0.18s ease;
      }
      .side-link:hover {
        background: rgba(255, 255, 255, 0.14);
      }
      .side-link i {
        width: 22px;
        text-align: center;
      }
      
      .side-link.active {
        background: #fff;
        color: #1e40af;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
      }
      
      .sidebar .divider {
        height: 1px;
        background: linear-gradient(90deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.35), rgba(255, 255, 255, 0.1));
        margin: 12px 8px;
      }
      
      /* Main area */
      .main {
        margin-left: 260px; /* beri ruang untuk sidebar */
        flex: 1;
        display: flex;
        flex-direction: column;
        min-width: 0;
        background: radial-gradient(1200px 400px at -20% -10%, rgba(13, 110, 253, 0.07), transparent 60%), radial-gradient(900px 300px at 120% 10%, rgba(13, 110, 253, 0.06), transparent 60%), var(--bg);
      }
      
      /* Topbar */
      .topbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 16px 22px;
        position: sticky;
        top: 0;
        z-index: 5;
        background: rgba(255, 255, 255, 0.75);
        backdrop-filter: saturate(180%) blur(10px);
        border-bottom: 1px solid rgba(13, 110, 253, 0.08);
      }
      .top-title {
        font-size: 1.15rem;
        font-weight: 800;
        letter-spacing: 0.3px;
        color: #1e3a8a;
      }
      
      /* Page container */
      .page {
        padding: 22px;
        width: 100%;
      }
      .card-soft {
        background: var(--card);
        border: 1px solid rgba(13, 110, 253, 0.08);
        border-radius: var(--radius);
        box-shadow: 0 10px 30px rgba(13, 110, 253, 0.06);
      }
      
      /* Utilities */
      .tag {
        font-size: 0.78rem;
        padding: 0.2rem 0.5rem;
        border-radius: 999px;
        background: rgba(13, 110, 253, 0.12);
        color: #1d4ed8;
        font-weight: 700;
      }
      
      @media (max-width: 992px) {
        .sidebar {
          transform: translateX(-100%);
          transition: transform 0.2s ease;
        }
        .main {
          margin-left: 0;
        }
      }
    </style>
  </head>
  <body>
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="brand">
        <div class="brand-badge">
          <i class="fa-solid fa-heart-pulse"></i>
        </div>
        <h4>Supervisi Ners</h4>
      </div>

      {% with current=request.resolver_match.url_name %}
        <nav class="nav-section">
          {% if user.is_authenticated %}
            {% if user.is_staff %}
              <a class="side-link {% if current == 'admin_dashboard' %}active{% endif %}" href="{% url 'admin_dashboard' %}"><i class="fa-solid fa-gauge"></i> Dashboard</a>
              <a class="side-link {% if current == 'daftar_supervisi' %}active{% endif %}" href="{% url 'daftar_supervisi' %}"><i class="fa-solid fa-list-check"></i> Daftar Supervisi</a>
              <a class="side-link {% if current == 'kelola_perawat' %}active{% endif %}" href="{% url 'kelola_perawat' %}"><i class="fa-solid fa-user-nurse"></i> Kelola Perawat</a>
              <a class="side-link {% if current == 'kelola_format' %}active{% endif %}" href="{% url 'kelola_format' %}"><i class="fa-solid fa-clipboard-list"></i> Kelola Format</a>
            {% else %}
              <a class="side-link {% if current == 'daftar_format_supervisi' %}active{% endif %}" href="{% url 'daftar_format_supervisi' %}"><i class="fa-solid fa-clipboard-check"></i> Daftar Format Supervisi</a>
            {% endif %}
            <div class="divider"></div>
            <a class="side-link" href="{% url 'logout' %}"><i class="fa-solid fa-right-from-bracket"></i> Logout</a>
          {% else %}
            <a class="side-link {% if current == 'login' %}active{% endif %}" href="{% url 'login' %}"><i class="fa-solid fa-right-to-bracket"></i> Login</a>
          {% endif %}
        </nav>
      {% endwith %}
    </aside>

    <!-- Main -->
    <section class="main">
      <!-- topbar -->
      <div class="topbar">
        <div class="top-title">
          {% block pagetitle %}

          {% endblock %}
        </div>
        <div class="d-flex align-items-center gap-2">
          {% if user.is_authenticated %}
            <span class="tag"><i class="fa-regular fa-user me-1"></i>{{ user.username }}</span>
          {% endif %}
        </div>
      </div>

      <!-- page content -->
      <div class="page">
        {% block content %}

        {% endblock %}
      </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
